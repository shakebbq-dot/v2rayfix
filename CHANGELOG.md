# 更新日志

## [1.1.9.0-fixed] - 2025-11-02

### 🔴 最新修复（第二次更新）

#### 修复16-18: jemalloc编译内存不足问题
**问题：** 编译jemalloc时出现内存不足错误，进程被OOM killer杀死
**修复：**
- 智能计算编译线程数（基于可用内存）
- 添加内存检查和自动降级机制
- 支持跳过jemalloc继续安装
- Nginx配置根据jemalloc状态动态调整

### 🔴 最新修复（第一次更新）

#### 修复15: netcat包名兼容性问题
**问题：** 在Debian/Ubuntu某些版本中，`netcat`包不存在，导致安装SSL证书依赖失败
**错误信息：** `E: Package 'netcat' has no installation candidate`
**修复：** 
- 统一使用`netcat-openbsd`包（所有Debian/Ubuntu版本都支持）
- 添加备选方案：`netcat-traditional`
- 改进错误处理，确保至少`socat`安装成功

### ✅ 已修复的问题（共18个）

#### 严重Bug（3个）
1. ✅ 修复域名解析IP显示变量错误（第460行）
2. ✅ 修复base64编码跨平台兼容性问题
3. ✅ 修复证书更新脚本路径错误

#### 安全问题（2个）
4. ✅ 改进防火墙处理（不直接关闭）
5. ✅ 改进SELinux处理（询问用户，默认permissive）

#### 功能问题（6个）
6. ✅ 添加输入验证（域名、端口、UUID）
7. ✅ 添加网络下载重试机制
8. ✅ 改进域名检查的错误处理
9. ✅ 改进端口占用处理
10. ✅ 确保日志目录存在
11. ✅ **修复netcat包名兼容性问题**（新增）

#### 代码质量（4个）
12. ✅ 改进base64编码函数
13. ✅ 统一使用改进的下载函数
14. ✅ 改进错误处理
15. ✅ 添加更详细的提示信息

#### 编译问题（3个）
16. ✅ **智能计算编译线程数（避免内存不足）**（新增）
17. ✅ **改进jemalloc编译流程（添加降级机制）**（新增）
18. ✅ **动态调整Nginx配置（支持jemalloc可选）**（新增）

---

## [1.1.9.0] - 原始版本

这是从GitHub下载的原始脚本版本，包含14个已知问题。


